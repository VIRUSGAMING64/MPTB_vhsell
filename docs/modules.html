<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M贸dulos - Documentaci贸n MPTB_vhsell</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>MPTB_vhsell</h1>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="modules.html">M贸dulos</a></li>
                <li><a href="setup.html">Instalaci贸n</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="card">
            <h2>Estructura de M贸dulos</h2>
            <p>El n煤cleo del bot reside en la carpeta <code>modules/</code>. A continuaci贸n se describen los componentes principales:</p>
        </section>

        <section class="card">
            <h3> Ra铆z (bot.py)</h3>
            <p>Punto de entrada de la aplicaci贸n. Inicializa la <code>Application</code> de Telegram, configura los manejadores y arranca el hilo principal del "cerebro" (brain).</p>
        </section>

        <section class="card">
            <h3> modules/</h3>
            
            <div class="module-item">
                <h4>brain.py</h4>
                <p>Contiene la l贸gica de orquestaci贸n. Ejecuta un <code>mainloop</code> que consume tareas de las colas y las asigna al <code>runner</code>. Decide si un mensaje debe ser tratado como comando, descarga, subida o conversaci贸n con IA.</p>
            </div>

            <div class="module-item">
                <h4>gvar.py</h4>
                <p>Gesti贸n de variables globales y configuraci贸n.
                <ul>
                    <li>Carga variables de entorno (TOKEN, API keys).</li>
                    <li>Inicializa <code>actions</code> (MessageQueue) y <code>runner</code> (Pool).</li>
                    <li>Define el diccionario de comandos disponibles.</li>
                </ul>
                </p>
            </div>

            <div class="module-item">
                <h4>chatgpt.py</h4>
                <p>M贸dulo de integraci贸n con IA. Contiene la funci贸n <code>gpt(message)</code> que env铆a el texto del usuario a la API (OpenAI o compatible) y devuelve la respuesta.</p>
            </div>

            <div class="module-item">
                <h4>database.py</h4>
                <p>Manejo de persistencia de datos usando SQLite (actualmente en desarrollo).</p>
            </div>

            <div class="module-item">
                <h4>env.py</h4>
                <p>Responsable de la carga y extracci贸n de variables de entorno desde el archivo <code>.env</code>.</p>
            </div>

            <div class="module-item">
                <h4>net.py</h4>
                <p>M贸dulo de red. Contiene la clase <code>Downloader</code> para gestionar descargas y operaciones de red.</p>
            </div>

            <div class="module-item">
                <h4>utils.py</h4>
                <p>Utilidades varias para el bot:
                <ul>
                    <li><code>progress</code>: Generaci贸n de barras de progreso visuales.</li>
                    <li><code>GetMedia</code>: Identificaci贸n del tipo de medio en un mensaje (Video, Audio, Foto, etc.).</li>
                    <li><code>loop_runner</code>: Gesti贸n del bucle de eventos <code>asyncio</code> en un hilo separado.</li>
                </ul>
                </p>
            </div>

            <div class="module-item">
                <h4>entity/ (t_entity.py)</h4>
                <p>Definici贸n de entidades del sistema. La clase <code>peer</code> modela a un usuario o chat, almacenando propiedades como ID, nombre, estado premium y rutas asociadas.</p>
            </div>
        </section>

        <section class="card">
            <h3> modules/core/</h3>
            
            <div class="module-item">
                <h4>MessagesHandlers.py</h4>
                <p>Define la funci贸n <code>on_message</code>. Es el primer punto de contacto con los updates de Telegram. Clasifica los mensajes y los pone en la cola de procesamiento.</p>
            </div>

            <div class="module-item">
                <h4>commands.py</h4>
                <p>Implementaci贸n de los comandos del bot:
                <ul>
                    <li><code>/start</code>: Bienvenida.</li>
                    <li><code>/kill</code>: Detiene el bot.</li>
                    <li><code>/upload</code>: Sube archivos (WIP).</li>
                    <li>Otros comandos de sistema de archivos (ls, rm, mkdir, etc.).</li>
                </ul>
                </p>
            </div>

            <div class="module-item">
                <h4>queues.py</h4>
                <p>Implementa las estructuras de datos para la concurrencia:
                <ul>
                    <li><code>Pool</code>: Un pool de hilos simple para ejecutar tareas en paralelo.</li>
                    <li><code>MessageQueue</code>: Cola para almacenar los mensajes pendientes de procesar.</li>
                </ul>
                </p>
            </div>
        </section>
    </main>

    <footer>
        <p>Documentaci贸n generada para MPTB_vhsell</p>
    </footer>
</body>
</html>
